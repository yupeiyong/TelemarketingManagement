@using JJsites.DataTransferObjects
@using JJsites.DomainModels
@using JJsites.Enumerations
@using JJsoft.Infrastructure.OnlineUserUtils
@model BudgetUnit
@{
    ViewBag.Title = "Edit";
    Layout = null;
    var data = Model ?? new BudgetUnit();
    var checkedStr = data.IsDefaultByAdd ? "checked" : "";
    var unitLevels = ViewBag.BudgetUnitLevels as List<BudgetUnitLevel>;
    if (unitLevels == null)
    {
        unitLevels = new List<BudgetUnitLevel>();
    }
    var isAdd = data.Id <= 0;
    var currentUser = (ViewBag.CurrentUser as AllUser) ?? new AllUser();
    var isAdmin = currentUser.UserRoles.HasRole((long)UserRoleEnum.Administrator);
}
<link href="~/Lib/iCheck/1.0.2/skins/all.css" rel="stylesheet" />
<div class="container-fluid">
    <div class="row clearfix">
        <div class="col-md-12">
            <form class="form-horizontal" role="form">
                <div class="form-group">
                    <label class="col-sm-2 control-label">
                        <span class="redRequired">*</span>编号：
                    </label>
                    <div class="col-sm-10">
                        @if (isAdd)
                        {
                            <input name="CustomedNumber" type="text" class="form-control input-sm first" value="@data.CustomedNumber" required="true" />
                        }
                        else
                        {
                            <input name="CustomedNumber" type="text" class="form-control input-sm" value="@data.CustomedNumber" readonly="readonly" />
                        }
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">
                        <span class="redRequired">*</span>名称：
                    </label>
                    <div class="col-sm-10">
                        @if (isAdd)
                        {
                            <input name="Name" type="text" class="form-control input-sm" value="@data.Name" required="true" />
                        }
                        else
                        {
                            <input name="Name" type="text" class="form-control input-sm first" value="@data.Name" required="true" />
                        }
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">是否默认：</label>
                    <div class="col-sm-10">
                        <input name="@nameof(BudgetUnit.IsDefaultByAdd)" id="@nameof(BudgetUnit.IsDefaultByAdd)" type="checkbox" @checkedStr value="@data.IsDefaultByAdd" />
                        @*<label for="IsDefaultByAdd" title="指标新增默认选项">默认选项</label>*@<span class="redTipsForForm">空格选中、取消</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">单位级别：</label>
                    <div class="col-sm-10">
                        @if (unitLevels.Count == 0)
                        {
                            if (isAdmin)
                            {
                                <span style="color: red;">
                                    单位级别列表为空，需要先在管理员后台
                                    <a href="@Url.Action("Index", "BudgetUnitLevel", new {Area = "AdminAdministrator"})" target="_blank">
                                        <span style="font-weight: bold; color: blue; font-size: 14px;">[预算单位等级]</span>
                                    </a>添加
                                </span>
                            }
                            else
                            {
                                <span style="color: red;">
                                    单位级别列表为空，请以管理员帐号登录系统后台在 预算单位等级 中添加
                                </span>
                            }
                        }
                        else
                        {
                            <select name="@nameof(BudgetUnitEditDto.BudgetUnitLevelId)">
                                @foreach (var level in unitLevels)
                                {
                                    if (data.BudgetUnitLevel != null && data.BudgetUnitLevel.Id == level.Id)
                                    {
                                        <option value="@level.Id" selected="selected">@level.LevelName</option>
                                    }
                                    else
                                    {
                                        <option value="@level.Id">@level.LevelName</option>
                                    }
                                }
                            </select>
                        }
                    </div>
                </div>

                <div class="form-group">
                    <div class="hidden">
                        <input name="Id" type="hidden" value="@data.Id" />
                    </div>
                    <div class="col-sm-12 text-center buttons">
                        <button type="button" class="btn btn-success u-btn" id="btnSave" data-url="@Url.Action("Save")">
                            <i class="fa fa-save" aria-hidden="true"></i>
                            保存
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<script src="~/Lib/iCheck/1.0.2/icheck.min.js"></script>
<script src="~/Areas/AdminManager/Scripts/budgetUnit-edit.js"></script>
<script src="~/Areas/AdminManager/Scripts/basicData-commons.js"></script> @*基础资料模块编辑键盘操作*@