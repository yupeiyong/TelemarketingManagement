@using JJsites.DomainModels
@using JJsites.ViewModels
@using JJsoft.Infrastructure.Extensions
@{
    var modelDescription = typeof(HigherBudgetTarget).GetDescription();
    ViewBag.Title = modelDescription + "编辑";
}

@section css{
    <link href="~/Lib/JqueryEasyui/1.5.1/themes/default/easyui.css" rel="stylesheet" />
    <link href="~/Lib/BootStrapTreeView/1.2.0/css/bootstrap-treeview.min.css" rel="stylesheet" />
    <link href="~/Areas/AdminManager/Content/higherBudgetTarget-index.css" rel="stylesheet" />
}
<div class="container-fluid">
    <div class="CurrentPosition">
        <img src="~/Content/Images/icon_currentPosition.png" />
        当前位置：后台管理系统 > @ViewBag.Title
    </div>
    <div class="row clearfix conditional">
        <div class="form-search">
            <form class="search">
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="control-label">功能科目：</label>
                            <div>
                                <select name="FunctionSubjectId" id="FunctionSubjectId" class="easyui-combotree" data-url="@Url.Action("GetTreeBasicData", new {ModelTypeName = "FunctionSubject"})"></select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="control-label">资金性质：</label>
                            <div>
                                <select name="HigherSpecialFundMoneyNatureId" id="HigherSpecialFundMoneyNatureId" class="easyui-combotree" data-url="@Url.Action("GetTreeBasicData", new {ModelTypeName = "HigherSpecialFundMoneyNature"})"></select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="control-label">专款来源：</label>
                            <div>
                                <select name="HigherSpecialFundSourceId" id="HigherSpecialFundSourceId" class="easyui-combotree" data-url="@Url.Action("GetTreeBasicData", new {ModelTypeName = "HigherSpecialFundSource"})"></select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="control-label">业务处室：</label>
                            <div>
                                <select name="HigherDepartmentId" id="HigherDepartmentId" class="easyui-combotree" data-url="@Url.Action("GetTreeBasicData", new {ModelTypeName = "HigherDepartment"})"></select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="control-label">开始时间：</label>
                            <div>
                                <input name="StartOnPosted" type="date" class="form-control input-sm" title="发文时间" />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="control-label">结束时间：</label>
                            <div>
                                <input name="EndOnPosted" type="date" value="@DateTime.Today.ToDateString()" class="form-control input-sm" title="发文时间" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="input-group">
                            <input type="text" class="form-control bk-radius" name="Keywords" id="Keywords" placeholder="关键词...">
                            <span class="input-group-btn">
                                <button class="btn btn-info" id="btnSearch">
                                    <i class="fa fa-search"></i>
                                    搜索
                                </button>
                            </span>
                        </div>
                        <button type="button" class="btn btn-default btn-sm" id="btnClear"
                                title="清空">
                            <i class="fa fa-eraser" aria-hidden="true"></i>
                            清空
                        </button>
                        <button type="button" class="btn btn-default btn-sm" id="btnAdd"
                                title="新增指标" data-u-url="@Url.Action("Add")">
                            <i class="fa fa-plus-circle" aria-hidden="true"></i>
                            新增
                        </button>
                        <button type="button" class="btn btn-default btn-sm" id="btnExport"
                                title="导出指标" data-u-url="@Url.Action("DoExport")">
                            <i class="fa fa-arrow-circle-down" aria-hidden="true"></i>
                            导出
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="row clearfix">
        <div class="col-md-12">
            <table data-url="@Url.Action("GetData")" id="tab"
                   data-id-field="Id"
                   data-resizable="true"
                   data-filter-control="false">
                <thead>
                    <tr>
                        <th data-sortable="false" data-field="_id" data-width="50"
                            data-align="center" data-halign="center" data-valign="middle">
                            行号
                        </th>
                        <th data-sortable="false" data-field="@nameof(HigherBudgetTargetViewModel.Id)" data-visible="false" data-width="0"
                            data-align="center" data-halign="center" data-valign="middle">
                            Id
                        </th>
                        <th data-sortable="true" data-field="@nameof(HigherBudgetTargetViewModel.DocumentNumber)" data-width="180"
                            data-align="left" data-halign="center" data-valign="middle">
                            文号
                        </th>
                        <th data-sortable="true" data-field="@nameof(HigherBudgetTargetViewModel.FunctionSubjectCustomedNumberAndName)" data-width="180"
                            data-align="left" data-halign="center" data-valign="middle">
                            功能科目
                        </th>
                        <th data-sortable="true" data-field="@nameof(HigherBudgetTargetViewModel.HigherSpecialFundMoneyNatureName)" data-width="180"
                            data-align="left" data-halign="center" data-valign="middle">
                            上级专款资金性质
                        </th>
                        <th data-sortable="true" data-field="@nameof(HigherBudgetTargetViewModel.HigherSpecialFundSourceName)" data-width="180"
                            data-align="left" data-halign="center" data-valign="middle">
                            上级专款来源
                        </th>
                        <th data-sortable="true" data-field="@nameof(HigherBudgetTargetViewModel.HigherDepartmentName)" data-width="180"
                            data-align="left" data-halign="center" data-valign="middle">
                            上级科室
                        </th>
                        <th data-sortable="true" data-field="@nameof(HigherBudgetTargetViewModel.BudgetSourceName)" data-width="180"
                            data-align="left" data-halign="center" data-valign="middle">
                            预算来源
                        </th>
                        <th data-sortable="true" data-field="@nameof(HigherBudgetTargetViewModel.TotalAmountInfo)" data-width="180"
                            data-align="right" data-halign="center" data-valign="middle">
                            金额
                        </th>
                        <th data-sortable="false" data-width="180" data-field="Id"
                            data-formatter="operateFormatter"
                            data-align="center" data-halign="center" data-valign="middle">
                            操作
                        </th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

@section scripts{
    <script src="~/Lib/JqueryEasyui/1.5.1/jquery.easyui.min.js"></script>

    <script src="~/Lib/jquery-validate-extend.js"></script>
    <script src="~/Areas/AdminManager/Scripts/higherBudgetTarget-index.js"></script>
}